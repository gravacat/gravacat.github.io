<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<head>
<script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
<style>
table {
    width:50%;
}
table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
}
td{
  width:2px;
  
}
</style>
</head>
<script>
$(document).ready(function(){

  $('#main').hide();
});
function h(){
$('#main').toggle();

  $('#btn').hide();
  start();
};
</script>
<body>
    <div style="padding-left:45%;">
      <button id="btn"style="width:100px;height:50px;" onclick="h()">開始遊戲</button>
    </div>
    <div style="background-image: url('snake.jpg')">
  <div id="score"style="position:absolute;bottom:20px"></div>
<div id="main" style="display:flex;width:96vw;height:96vh;"> 
  <div class="jumboBanner shadow">
    <h1 style="font-family: Verdana, Geneva, Tahoma, sans-serif">Fun Snake</h1>
  </div> 


<div style="margin: auto; width: 500px;">
<table>
  <tr>
   <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
    <tr>
   <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
  </tr>
  <tr>
     <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
  <tr>
 <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
  </tr>
  <tr>
  <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
  </tr>
<tr>
   <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
    <tr><tr>
   <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
    <tr><tr>
   <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
    <tr><tr>
   <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
    <tr><tr>
   <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
    <tr><tr>
   <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
    <tr>
  <tr>
   <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
   </tr>
  <tr>
 <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
  <tr>
 <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
   </tr>
  <tr>
 <td></td>
   <td></td>
   <td></td>
    <td></td>
    <td></td>		
    <td></td>
     <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
     <td></td>
     <td></td>		
    <td></td>
  </tr>
</table>
</div>
</div>

</div>

<script>

var x = $("td").width();
$("td").height(x);

$(window).resize(function() {
 var x = $("td").width();
$("td").height(x);
});

for(i=0;i < $("td").length;i++){
	var as = $("td")[i];//as會變為plain HTML   <tr>..</tr>
	$(as).attr('id',i);//所以要再用jquery包起來


};

var current = 239;
var direction ="";//一開始的前進方向
var currentBody=[current];
var score1 = 0;
var snackColor ='black';

var current1 = 1;
var direction1 ="";//一開始的前進方向
var currentBody1=[current1];
var score2 = 0;
var snackColor1 ='yellow';

var apple = Math.floor((Math.random() * 95) + 1);//產生一個隨機的蘋果
$("#"+(apple)).css('background','red');//

document.onkeydown = function(key){

if (key.code=='KeyA') { 
	
	direction ="left";
	

}else if(key.code=="KeyD"){
	direction ="right";
    
}else if(key.code=="KeyW"){
	direction ="up";

}else if(key.code=="KeyS"){
	direction ="down";
   

}


}
   
for(i=0;i<currentBody.length;i++){//一開始的黑色
$("#"+currentBody[i]).css('background',snackColor)
 };
 for(i=0;i<currentBody1.length;i++){//一開始的黑色
$("#"+currentBody1[i]).css('background',snackColor1)
 };
function start(){
var starts =  setInterval(function(){





 if(direction=="right"){

 	if(currentBody[0]!=15&&currentBody[0]!=31&&currentBody[0]!=47&&currentBody[0]!=63&&currentBody[0]!=79&&currentBody[0]!=95&&currentBody[0]!=111&&currentBody[0]!=127&&currentBody[0]!=143&&currentBody[0]!=159&&currentBody[0]!=175&&currentBody[0]!=191&&currentBody[0]!=207&&currentBody[0]!=223&&currentBody[0]!=239){
	
   current=currentBody[((currentBody.length)-1)];//a[3]為最後一元素但a.length為4，所以減1，current表示蛇陣列的尾巴id，記錄上一輪尾巴的坐標


  var last = currentBody[(currentBody.length)-1];//在移動前記錄尾巴元素 

    for(i=(currentBody.length)-1;i>0;i--){///前進時後一個元素id護變為前一個id
    currentBody[i]=currentBody[i-1]
    
    };

    cc = currentBody.slice(0);
    delete cc[0];
    
    cc.push(last);
    
     currentBody[0]+=1;

   if(($.inArray(currentBody[0],cc))!=-1){
  if(currentBody[0]!=apple){
    clearInterval(starts);
    $('body').html("遊戲結束"+score1);
   };

};




$("#"+(current)).css("background","white");



for(i=0;i<currentBody.length;i++){//蛇的陣列元素是黑色
$("#"+currentBody[i]).css('background',snackColor)
 };

	if(currentBody[0]==apple){
   
	currentBody.push(apple);
  score1++;
   console.log("aa");
  $('#score').html("你的分數為"+score1);
  for(;;){//如果蘋果產生在蛇身體上，重新產生蘋果直到不在
   apple = Math.floor((Math.random() * 95) + 1);
   if(($.inArray(apple,currentBody))==-1){
  
    break;
   }
 };
 $("#"+(apple)).css('background','red');//讓蘋果的位置是紅色
};

 }else{
     clearInterval(starts);
    $('body').html("遊戲結束"+score1);
 
 };
 };


 if(direction=="left"){
 	if(currentBody[0]!=0&&currentBody[0]!=16&&currentBody[0]!=32&&currentBody[0]!=48&&currentBody[0]!=64&&currentBody[0]!=80&&currentBody[0]!=96&&currentBody[0]!=112&&currentBody[0]!=128&&currentBody[0]!=144&&currentBody[0]!=176&&currentBody[0]!=192&&currentBody[0]!=208&&currentBody[0]!=224){

   current=currentBody[((currentBody.length)-1)];//a[3]為最後一元素但a.length為4，所以減1，current表示蛇陣列的尾巴id，記錄上一輪尾巴的坐標


  var last = currentBody[(currentBody.length)-1];//在移動前記錄尾巴元素


 for(i=(currentBody.length)-1;i>0;i--){///前進時後一個元素id護變為前一個id
    currentBody[i]=currentBody[i-1]
    
    };
   
    cc = currentBody.slice(0);
    delete cc[0];
         //////////看是否撞到身體，使用var last記錄完後，把頭刪掉加上上次的尾巴
    cc.push(last);
    
     currentBody[0]-=1;

   if(($.inArray(currentBody[0],cc))!=-1){
  if(currentBody[0]!=apple){
    clearInterval(starts);
    $('body').html("遊戲結束"+score1);
   };//////////看是否撞到身體，使用var last記錄完後，把頭刪掉加上上次的尾巴

};




$("#"+(current)).css("background","white");



for(i=0;i<currentBody.length;i++){//蛇的陣列元素是黑色
$("#"+currentBody[i]).css('background',snackColor)
 };

  if(currentBody[0]==apple){
  currentBody.push(apple);
  score1++;
  $('#score').html("你的分數為"+score1);

  for(;;){//如果蘋果產生在蛇身體上，重新產生蘋果直到不在
   apple = Math.floor((Math.random() * 95) + 1);
   if(($.inArray(apple,currentBody))==-1){
   
    break;
   }
 };

$("#"+(apple)).css('background','red');//讓蘋果的位置是紅色
  
    };


 }else{
     clearInterval(starts);
    $('body').html("遊戲結束"+score1);
 
 };
 };
 if(direction=="down"){
 	if(currentBody[0]!=224&&currentBody[0]!=225&&currentBody[0]!=226&&currentBody[0]!=227&&currentBody[0]!=228&&currentBody[0]!=229&&currentBody[0]!=230&&currentBody[0]!=231&&currentBody[0]!=232&&currentBody[0]!=233&&currentBody[0]!=234&&currentBody[0]!=235&&currentBody[0]!=236&&currentBody[0]!=237&&currentBody[0]!=238&&currentBody[0]!=239){


   current=currentBody[((currentBody.length)-1)];//a[3]為最後一元素但a.length為4，所以減1，記錄上一輪尾巴的坐標

 var last = currentBody[(currentBody.length)-1];//在移動前記錄尾巴元素 


for(i=(currentBody.length)-1;i>0;i--){///前進時後一個元素id護變為前一個id
    currentBody[i]=currentBody[i-1]
    
    };

   
    cc = currentBody.slice(0);
    delete cc[0];
    
    cc.push(last);
    
     currentBody[0]+=16;

   if(($.inArray(currentBody[0],cc))!=-1){
  if(currentBody[0]!=apple){
    clearInterval(starts);
    $('body').html("遊戲結束得分為"+score1);
   };

};



$("#"+(current)).css("background","white");



for(i=0;i<currentBody.length;i++){//蛇的陣列元素是黑色
$("#"+currentBody[i]).css('background',snackColor)
 };


  if(currentBody[0]==apple){
  currentBody.push(apple);
  score1++;
  $('#score').html("你的分數為"+score1);

  for(;;){//如果蘋果產生在蛇身體上，重新產生蘋果直到不在
   apple = Math.floor((Math.random() * 95) + 1);
   if(($.inArray(apple,currentBody))==-1){
   
    break;
   }
 };

$("#"+(apple)).css('background','red');//讓蘋果的位置是紅色
  
    };

 }else{
     clearInterval(starts);
    $('body').html("遊戲結束"+score1);
 
 };
 };
 if(direction=="up"){
 	if(currentBody[0]!=0&&currentBody[0]!=1&&currentBody[0]!=2&&currentBody[0]!=3&&currentBody[0]!=4&&currentBody[0]!=5&&currentBody[0]!=6&&currentBody[0]!=7&&currentBody[0]!=8&&currentBody[0]!=9&&currentBody[0]!=10&&currentBody[0]!=11&&currentBody[0]!=12&&currentBody[0]!=13&&currentBody[0]!=14&&currentBody[0]!=15){
	
/////////
   current=currentBody[((currentBody.length)-1)];//a[3]為最後一元素但a.length為4，所以減1，記錄上一輪尾巴的坐標，讓他變白色
////////



 var last = currentBody[(currentBody.length)-1];//在移動前記錄尾巴元素 



for(i=(currentBody.length)-1;i>0;i--){///前進時後一個元素id護變為前一個id
    currentBody[i]=currentBody[i-1]
    
    };
 
    cc = currentBody.slice(0);
    delete cc[0];
    
    cc.push(last);
    
     currentBody[0]-=16;

   if(($.inArray(currentBody[0],cc))!=-1){
  if(currentBody[0]!=apple){
    clearInterval(starts);
    $('body').html("遊戲結束得分為"+score1);
   };

};


//////    
$("#"+(current)).css("background","white");


//////
for(i=0;i<currentBody.length;i++){//蛇的陣列元素是黑色
$("#"+currentBody[i]).css('background',snackColor)
 };


//////
  if(currentBody[0]==apple){
  currentBody.push(apple);
  score1++;
  $('#score').html("你的分數為"+score1);

  for(;;){//如果蘋果產生在蛇身體上，重新產生蘋果直到不在
   apple = Math.floor((Math.random() * 95) + 1);
   if(($.inArray(apple,currentBody))==-1){
    
    break;
   }
 };

$("#"+(apple)).css('background','red');//讓蘋果的位置是紅色
  
    };
//////

 }else{
     clearInterval(starts);
    $('body').html("遊戲結束"+score1);
 
 };
 };



},300);
};



</script>

</body>



</html>